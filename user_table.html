<!DOCTYPE html>
<html lang="en">
	<head>
    	<meta charset="utf-8">
    	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    	<meta name="viewport" content="width=device-width, initial-scale=1">
    	<meta name="description" content="">
    	<meta name="author" content="">
        <script type="text/javascript" src="http://www.google.com/jsapi"></script>   
    	<script type="text/javascript">
            google.load('visualization', '1', {packages: ['corechart']});
    		var mainDatabaseFusionTableID = "1OIi7vxHHfNYOCk_8kTnVMqZrw4hF7VlTxLsxPz-O"; // Table with product tracking info.
            var whatToGetFusionTableID = "1bm8y6K3bFzpbdRZLtV5VPZrNcXuuj1mjle-4-7de"; // Table with the list of items to be pulled from the main database to be shown on the product information table.
            function initialize(){
                getWhatToGet();

            }

            function getWhatToGet(){

            }

            function getShirtInfo(key, whatToGet){
                whatToGet = "FP_In_Charge, FP_Location, FP_Time, FP_Hands, MF_In_Charge, MF_Location, MF_Time, MF_Hands";
      			var queryString = "SELECT " + whatToGet + " FROM " + mainDatabaseFusionTableID + " WHERE Design_Batch = '" + key.design_Batch + "' AND Start_ID <= '" + key.unique_ID + "' AND End_ID >= '" + key.unique_ID + "'";
      			var query = new google.visualization.Query('http://www.google.com/fusiontables/gvizdata?tq=' + encodeURIComponent(queryString));   
            	query.send(function (response){
                        alert("LOL");
                        var table = response.getDataTable();
                        var rows = table.getNumberOfRows();
                        alert("LOL " + table.getValue(0, 1) + "Rows " + rows);
                });
                //return table;
    		}
            // TODO Add parsing function for the key.
    		function parseKey(key){
    			var isKeyOK = true;
    			if (!isKeyOK){
    				showParseError();
    			}
    			return isKeyOK;
    		}
    		function getKeyFromForm(){
                var key = {
                    design_Batch : document.getElementById("design_Batch").value,
                    unique_ID : document.getElementById("unique_ID").value,
                };
    			return key;
    		}
    		function onShowButtonClick(){
    			var key = getKeyFromForm();
    			if (parseKey(key)) {
    				var info = getShirtInfo(key, "whatToGet");
    				fillTable(info);
    			}
    		}
    		function showParseError(){

    		}
    		function fillTable(){

    		}
    	</script>     
    </head>
    <body role="document">
    	<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  				Design Batch: <input type="text" name="design_Batch" id="design_Batch"><br>
  				Unique id: <input type="number" name="unique_ID" id="unique_ID"><br>
  				<input type="button" value="Submit" onclick="onShowButtonClick()">
    	</div>
    </body>
</html>